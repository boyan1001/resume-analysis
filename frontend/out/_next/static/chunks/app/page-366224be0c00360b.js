(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2770:(e,o,r)=>{Promise.resolve().then(r.bind(r,8140))},8140:(e,o,r)=>{"use strict";let t,n;r.r(o),r.d(o,{default:()=>v});var i=r(4684),a=r(4464),s=r(1474),l=r(5061),d=r(7614);let c={apiKey:d.env.NEXT_PUBLIC_FIREBASE_API_KEY||"",authDomain:d.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"",projectId:d.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"",storageBucket:d.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"",messagingSenderId:d.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"",appId:d.env.NEXT_PUBLIC_FIREBASE_APP_ID||"",measurementId:d.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||""},p=c.apiKey&&c.projectId;if(p||console.warn("Firebase 配置不完整。認證功能將被禁用。"),p)try{let e=(0,l.Wp)(c);t=(0,s.xI)(e),n=new s.HF}catch(e){console.error("Firebase 初始化失敗:",e)}var x=r(1260);let u=r(7614).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:3001";function g(){let[e,o]=(0,a.useState)("input"),[r,n]=(0,a.useState)(""),[s,l]=(0,a.useState)([]),d=(0,a.useRef)(null),[c,p]=(0,a.useState)(!1),[g,f]=(0,a.useState)(""),[b,h]=(0,a.useState)(!1),[y,m]=(0,a.useState)([]),[v,w]=(0,a.useState)(!1),S=(0,a.useRef)(null),j=(0,a.useRef)([]),[k,C]=(0,a.useState)("general"),[_,I]=(0,a.useState)([]),[R,z]=(0,a.useState)(!1),[E,B]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=localStorage.getItem("mockInterviewHistory");e&&m(JSON.parse(e))},[]);let T=e=>{if(!e.trim())return;let o=[e,...y.filter(o=>o!==e)].slice(0,10);m(o),localStorage.setItem("mockInterviewHistory",JSON.stringify(o))},A=(0,a.useCallback)(async()=>{if(null==t?void 0:t.currentUser)try{var e;let o=await (null==(e=t.currentUser)?void 0:e.getIdToken()),r=await fetch("".concat(u,"/interview_history"),{headers:{Authorization:"Bearer ".concat(o)}}),n=await r.json();n.interview_history&&(console.log("new data"),I(n.interview_history))}catch(e){console.error("Error fetching interview history:",e)}},[t]);(0,a.useEffect)(()=>{if(!t)return void B(!1);let e=t.onAuthStateChanged(e=>{B(!!e),e&&A()});return()=>e()},[t,A]),(0,a.useEffect)(()=>{if("interview"===e){var o;null==(o=d.current)||o.scrollIntoView({behavior:"smooth"})}},[s,e]);let D=async()=>{if(!r.trim())return void alert("請輸入您想要應徵的職位");T(r.trim()),w(!1);let e=(0,x.A)();f(e),o("interview"),l(e=>[...e,"正在連接面試官..."]),(async()=>{try{let o=new FormData;o.append("session_id",e),o.append("job_position",r),o.append("interview_type",k),o.append("end_interview","false");let n={};if(null==t?void 0:t.currentUser)try{let e=await t.currentUser.getIdToken();n.Authorization="Bearer ".concat(e)}catch(e){console.log("無法獲取用戶 token，將以匿名模式進行面試:",e)}let i=await fetch("".concat(u,"/interview"),{method:"POST",body:o,headers:n}),a=await i.json();if(a.error)return void l(e=>[...e,"Error: ".concat(a.error)]);a.user_input_text?l(e=>[...e,"You: ".concat(a.user_input_text)]):l(e=>[...e,"You: (Audio input received)"]),l(e=>[...e,"Bot: ".concat(a.gemini_response_text)]),console.log("data.audio_response_url",a.audio_response_url),a.audio_response_url&&M(a.audio_response_url)}catch(e){console.error("Error fetching initial bot response:",e),l(o=>[...o,"Error starting interview: ".concat(e)])}})()},M=e=>{let o=new Audio(e);h(!0),o.play(),o.onended=()=>{W()}},W=()=>{h(!1),U()},U=async()=>{if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});S.current=new MediaRecorder(e,{mimeType:"audio/webm"}),j.current=[],S.current.ondataavailable=e=>{e.data.size>0&&j.current.push(e.data)},S.current.onstop=async()=>{let o=new Blob(j.current,{type:"audio/webm"});j.current=[];let n=new FormData;n.append("session_id",g),n.append("audio",o,"recording.webm"),n.append("job_position",r),n.append("interview_type",k),n.append("end_interview","false"),l(e=>[...e,"You: (analyzing...)"]);try{var i;let e=await (null==t||null==(i=t.currentUser)?void 0:i.getIdToken()),o=await fetch("".concat(u,"/interview"),{method:"POST",body:n,headers:{Authorization:"Bearer ".concat(e)}}),r=await o.json();if(r.error)return void l(e=>[...e,"Error: ".concat(r.error)]);l(e=>e.filter(e=>"You: (analyzing...)"!==e)),r.user_input_text?l(e=>[...e,"You: ".concat(r.user_input_text)]):l(e=>[...e,"You: (Audio input processed)"]),l(e=>[...e,"Bot: ".concat(r.gemini_response_text)]),r.audio_response_url&&(console.log("data.audio_response_url",r.audio_response_url),M(r.audio_response_url))}catch(e){l(e=>e.filter(e=>"You: (Sending audio...)"!==e)),console.error("Error sending audio:",e),l(o=>[...o,"Error sending audio: ".concat(e)])}e.getTracks().forEach(e=>e.stop())},S.current.start(),p(!0),l(e=>[...e,"You: (Recording...)"])}catch(e){console.error("Error accessing microphone:",e),l(o=>[...o,"Error accessing microphone: ".concat(e)])}else alert("getUserMedia not supported on your browser!")},F=async()=>{try{var e;let n=new FormData;n.append("session_id",g),n.append("job_position",r),n.append("end_interview","true");let i=await (null==t||null==(e=t.currentUser)?void 0:e.getIdToken()),a=await fetch("".concat(u,"/interview"),{method:"POST",body:n,headers:{Authorization:"Bearer ".concat(i)}}),s=await a.json();if(s.error)return void l(e=>[...e,"Error: ".concat(s.error)]);l(e=>[...e,"Bot: 面試結束，感謝您的參與！"]),setTimeout(()=>{o("input"),l([])},2e3)}catch(e){console.error("Error ending interview:",e),l(o=>[...o,"Error ending interview: ".concat(e)])}};return"input"===e?(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",fontFamily:"Arial, sans-serif",height:"850px",borderRadius:"30px",overflow:"hidden",boxShadow:"0 8px 30px rgba(0,0,0,0.15)",backgroundColor:"#ffffff",border:"1px solid rgb(6, 6, 6)"},children:[(0,i.jsx)("div",{style:{padding:"18px",borderBottom:"1px solid #e0e0e0",fontSize:"28px",fontWeight:"bold",textAlign:"center",backgroundColor:"#f8f9fa",color:"#333",boxShadow:"0 2px 8px rgba(0,0,0,0.05)"},children:"模擬面試設定 (Mock Interview Setup)"}),(0,i.jsxs)("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"40px",backgroundColor:"#fbfcfd",gap:"30px"},children:[(0,i.jsx)("div",{style:{textAlign:"center",fontSize:"18px",color:"#333",marginBottom:"20px"},children:"請輸入您想要應徵的職位，我們將為您客製化面試問題"}),(0,i.jsxs)("div",{style:{width:"100%",maxWidth:"400px",position:"relative"},children:[(0,i.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),onFocus:()=>w(!0),onBlur:()=>{setTimeout(()=>w(!1),200)},placeholder:"例如：前端工程師、產品經理、資料科學家...",style:{width:"100%",padding:"15px 20px",fontSize:"16px",borderRadius:"25px",border:"2px solid #e0e0e0",outline:"none",transition:"border-color 0.3s ease",boxSizing:"border-box",textAlign:"center"},onKeyPress:e=>{"Enter"===e.key&&D()}}),v&&y.length>0&&(0,i.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"10px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto",marginTop:"5px"},children:[(0,i.jsxs)("div",{style:{padding:"10px 15px",fontSize:"12px",color:"#666",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{children:"搜尋紀錄"}),(0,i.jsx)("button",{onClick:()=>{m([]),localStorage.removeItem("mockInterviewHistory"),w(!1)},style:{background:"none",border:"none",color:"#999",cursor:"pointer",fontSize:"12px",padding:"2px 6px",borderRadius:"4px"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f0f0f0"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"清除"})]}),y.map((e,o)=>(0,i.jsxs)("div",{onClick:()=>{n(e),w(!1)},style:{padding:"12px 15px",cursor:"pointer",borderBottom:o<y.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333",transition:"background-color 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f8f9fa"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,i.jsx)("span",{style:{marginRight:"8px",color:"#999"},children:"\uD83D\uDD50"}),e]},"search-history-".concat(e)))]})]}),(0,i.jsxs)("div",{style:{width:"100%",maxWidth:"400px",backgroundColor:"#fff",border:"1px solid #e0e0e0",borderRadius:"10px",padding:"20px",marginTop:"10px",marginBottom:"10px"},children:[(0,i.jsx)("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#333",textAlign:"center",marginBottom:"15px"},children:"請選擇面試類型"}),(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[{id:"general",label:"一般面試",desc:"基本面試問題和職位相關討論"},{id:"codility",label:"程式 Codility",desc:"程式設計和演算法測試"},{id:"behavior",label:"Behavior Question",desc:"行為面試和情境問題"}].map(e=>(0,i.jsxs)("div",{onClick:()=>C(e.id),style:{display:"flex",alignItems:"center",padding:"12px",border:"2px solid ".concat(k===e.id?"#007bff":"#e0e0e0"),borderRadius:"8px",cursor:"pointer",backgroundColor:k===e.id?"#f0f8ff":"#fff",transition:"all 0.2s"},children:[(0,i.jsx)("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"2px solid ".concat(k===e.id?"#007bff":"#ccc"),marginRight:"12px",display:"flex",alignItems:"center",justifyContent:"center"},children:k===e.id&&(0,i.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#007bff"}})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold",color:"#333",marginBottom:"2px"},children:e.label}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#666"},children:e.desc})]})]},"interview-type-".concat(e.id)))})]}),E&&(0,i.jsxs)("div",{style:{width:"100%",maxWidth:"400px",position:"relative"},children:[(0,i.jsxs)("button",{onClick:()=>z(!R),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #e0e0e0",backgroundColor:"#f8f9fa",cursor:"pointer",fontSize:"14px",color:"#333",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{children:"面試歷史記錄"}),(0,i.jsx)("span",{children:R?"▼":"▶"})]}),R&&(0,i.jsx)("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"8px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",marginTop:"8px",maxHeight:"300px",overflowY:"auto",zIndex:1e3},children:0===_.length?(0,i.jsx)("div",{style:{padding:"20px",textAlign:"center",color:"#666"},children:"尚無面試記錄"}):_.map((e,o)=>(0,i.jsxs)("div",{style:{padding:"15px",borderBottom:o<_.length-1?"1px solid #f0f0f0":"none"},children:[(0,i.jsx)("div",{style:{fontSize:"14px",fontWeight:"bold",marginBottom:"5px"},children:e.test_topic}),(0,i.jsx)("div",{style:{fontSize:"12px",color:"#666",marginBottom:"8px"},children:new Date(e.timestamp).toLocaleString()}),(0,i.jsx)("div",{style:{fontSize:"13px",color:"#333",whiteSpace:"pre-wrap"},children:e.evaluation})]},e.session_id))})]}),(0,i.jsx)("button",{onClick:D,style:{padding:"15px 40px",borderRadius:"25px",background:"linear-gradient(45deg, #007bff 0%, #0056b3 100%)",color:"#fff",border:"none",cursor:"pointer",fontSize:"18px",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 15px rgba(0,123,255,0.3)",outline:"none"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 20px rgba(0,123,255,0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 15px rgba(0,123,255,0.3)"},children:"開始面試 (Start Interview)"})]})]}):(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",fontFamily:"Arial, sans-serif",height:"600px",borderRadius:"15px",overflow:"hidden",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",backgroundColor:"#ffffff",border:"1px solid rgb(6, 6, 6)"},children:[(0,i.jsxs)("div",{style:{padding:"18px",borderBottom:"1px solid #e0e0e0",fontSize:"20px",fontWeight:"bold",textAlign:"center",backgroundColor:"#f8f9fa",color:"#333",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("button",{onClick:()=>o("input"),style:{background:"none",border:"none",fontSize:"16px",color:"#007bff",cursor:"pointer",padding:"5px 10px",borderRadius:"5px",transition:"background-color 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f0f0f0"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"← 返回設定"}),(0,i.jsxs)("span",{children:["模擬面試 - ",r]}),(0,i.jsx)("div",{style:{width:"80px"}})]}),(0,i.jsxs)("div",{style:{flexGrow:1,overflowY:"auto",padding:"20px",backgroundColor:"#fbfcfd",display:"flex",flexDirection:"column",gap:"10px"},children:[s.map((e,o)=>{let r=e.startsWith("You: "),t=e.replace(/^You: |^Bot: /,"");return(0,i.jsx)("div",{style:{display:"flex",justifyContent:r?"flex-end":"flex-start"},children:(0,i.jsx)("div",{style:{padding:"12px 18px",borderRadius:"22px",backgroundColor:r?"#007bff":"#e9ecef",backgroundImage:r?"linear-gradient(45deg, #007bff 0%, #0056b3 100%)":"none",color:r?"#fff":"#333",maxWidth:"75%",wordWrap:"break-word",fontSize:"16px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:t})},"message-".concat(o,"-").concat(r?"user":"bot"))}),(0,i.jsx)("div",{ref:d})]}),(0,i.jsxs)("div",{style:{display:"flex",padding:"15px",borderTop:"1px solid #e0e0e0",backgroundColor:"#f8f9fa",gap:"10px"},children:[(0,i.jsx)("button",{onClick:c?()=>{S.current&&"recording"===S.current.state&&(S.current.stop(),p(!1),l(e=>e.filter(e=>"You: (Recording...)"!==e)))}:U,disabled:!c,style:{flexGrow:1,padding:"14px 22px",borderRadius:"25px",background:c?"linear-gradient(45deg, #dc3545 0%, #c82333 100%)":"linear-gradient(45deg, #007bff 0%, #0056b3 100%)",color:"#fff",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:c?"0 4px 10px rgba(220,53,69,0.3)":"0 4px 10px rgba(0,123,255,0.3)",outline:"none",opacity:b?.6:1},children:c?"停止錄音 (Stop Recording)":"分析中..."}),(0,i.jsx)("button",{onClick:F,style:{padding:"14px 22px",borderRadius:"25px",background:"linear-gradient(45deg, #6c757d 0%, #495057 100%)",color:"#fff",border:"none",cursor:"pointer",fontSize:"16px",fontWeight:"bold",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(108,117,125,0.3)",outline:"none"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 15px rgba(108,117,125,0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 10px rgba(108,117,125,0.3)"},children:"結束面試"})]})]})}var f=r(8651),b=r(2868),h=r(7952);let y=r(7614).env.NEXT_PUBLIC_API_BASE_URL;function m(){let[e,o]=(0,a.useState)(null),[r,t]=(0,a.useState)(""),[n,s]=(0,a.useState)(""),[l,d]=(0,a.useState)(""),[c,p]=(0,a.useState)([]),[x,u]=(0,a.useState)(!1),[g,h]=(0,a.useState)({});(0,a.useEffect)(()=>{let e=localStorage.getItem("resumeAnalysisHistory");e&&p(JSON.parse(e))},[]);let m=e=>{if(!e.trim())return;let o=[e,...c.filter(o=>o!==e)].slice(0,10);p(o),localStorage.setItem("resumeAnalysisHistory",JSON.stringify(o))},v=async()=>{if(!e)return void alert("請選擇一個履歷檔案。");n.trim()&&(m(n.trim()),u(!1));let o=new FormData;o.append("file",e),n&&o.append("job_title",n),l&&o.append("job_url",l),t("正在分析履歷，請稍候...");try{let e=await fetch("".concat(y,"/upload_imformation"),{method:"POST",body:o});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();t(r.content||"分析結果未提供。"),h(r.scores||{})}catch(e){console.error("履歷分析失敗:",e),t("履歷分析失敗，請重試。")}};return(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{fontSize:"2em",color:"#2c3e50",marginBottom:"20px",textAlign:"center"},children:"履歷分析 (Resume Analysis)"}),(0,i.jsx)("p",{style:{fontSize:"1.1em",color:"#666",marginBottom:"25px",textAlign:"center"},children:"上傳你的履歷並獲得Gemini的分析與建議。"}),(0,i.jsx)("p",{style:{fontSize:"1.1em",color:"#666",marginBottom:"30px",textAlign:"center"},children:"Upload your resume and get analysis and suggestions from Gemini."}),(0,i.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"25px",alignItems:"center",padding:"30px",border:"2px dashed #a7b7c7",borderRadius:"15px",backgroundColor:"#ffffff",boxShadow:"0 5px 15px rgba(0,0,0,0.08)",width:"100%",boxSizing:"border-box"},children:[(0,i.jsx)("input",{type:"file",accept:".pdf,.doc,.docx",onChange:e=>{e.target.files&&e.target.files[0]&&(o(e.target.files[0]),t(""),h({}))},style:{display:"none"},id:"resume-upload-input"}),(0,i.jsxs)("div",{style:{width:"100%",maxWidth:"500px",position:"relative"},children:[(0,i.jsx)("input",{type:"text",value:n,onChange:e=>s(e.target.value),onFocus:()=>u(!0),onBlur:()=>{setTimeout(()=>u(!1),200)},placeholder:"要應徵的職缺名稱 (可選)",style:{padding:"12px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ced4da",width:"100%",boxSizing:"border-box"}}),x&&c.length>0&&(0,i.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #e0e0e0",borderRadius:"10px",boxShadow:"0 4px 15px rgba(0,0,0,0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto",marginTop:"5px"},children:[(0,i.jsxs)("div",{style:{padding:"10px 15px",fontSize:"12px",color:"#666",borderBottom:"1px solid #f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsx)("span",{children:"搜尋紀錄"}),(0,i.jsx)("button",{onClick:()=>{p([]),localStorage.removeItem("resumeAnalysisHistory"),u(!1)},style:{background:"none",border:"none",color:"#999",cursor:"pointer",fontSize:"12px",padding:"2px 6px",borderRadius:"4px"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f0f0f0"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"清除"})]}),c.map((e,o)=>(0,i.jsxs)("div",{onClick:()=>{s(e),u(!1)},style:{padding:"12px 15px",cursor:"pointer",borderBottom:o<c.length-1?"1px solid #f0f0f0":"none",fontSize:"14px",color:"#333",transition:"background-color 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f8f9fa"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,i.jsx)("span",{style:{marginRight:"8px",color:"#999"},children:"\uD83D\uDD50"}),e]},o))]})]}),(0,i.jsx)("div",{style:{width:"100%",maxWidth:"500px"},children:(0,i.jsx)("input",{type:"text",value:l,onChange:e=>d(e.target.value),placeholder:"職缺頁面 URL (可選)",style:{padding:"12px",fontSize:"16px",borderRadius:"8px",border:"1px solid #ced4da",width:"100%",boxSizing:"border-box"}})}),(0,i.jsx)("label",{htmlFor:"resume-upload-input",style:{padding:"12px 25px",fontSize:"16px",fontWeight:"bold",borderRadius:"8px",backgroundColor:"#007bff",color:"#fff",cursor:"pointer",transition:"background-color 0.3s ease",boxShadow:"0 4px 10px rgba(0,123,255,0.2)",display:"inline-block"},children:e?"更換檔案 (Change File)":"選擇履歷檔案 (Choose Resume File)"}),e&&(0,i.jsxs)("p",{style:{fontSize:"15px",color:"#333",margin:"0"},children:["已選擇檔案:"," ",(0,i.jsx)("span",{style:{fontWeight:"bold"},children:e.name})]}),(0,i.jsx)("button",{onClick:v,disabled:!e,style:{padding:"12px 25px",fontSize:"16px",fontWeight:"bold",borderRadius:"8px",border:"none",cursor:"pointer",background:e?"linear-gradient(45deg, #28a745 0%, #218838 100%)":"#cccccc",color:"#fff",transition:"all 0.3s ease",boxShadow:e?"0 4px 10px rgba(40,167,69,0.3)":"none",outline:"none"},children:"上傳並分析履歷 (Upload & Analyze Resume)"}),r&&(0,i.jsxs)("div",{style:{marginTop:"30px",padding:"25px",border:"1px solid #e0e0e0",borderRadius:"12px",backgroundColor:"#fefefe",whiteSpace:"pre-wrap",width:"100%",maxWidth:"800px",boxShadow:"0 5px 20px rgba(0,0,0,0.08)",textAlign:"left"},children:[(0,i.jsx)("h3",{style:{fontSize:"1.5em",color:"#2c3e50",marginBottom:"15px"},children:"分析結果 (Analysis Result):"}),(0,i.jsx)("div",{style:{fontSize:"1em",lineHeight:"1.6",color:"#4a4a4a"},children:(0,i.jsx)(f.oz,{children:r})})]}),Object.keys(g).length>0&&(0,i.jsxs)("div",{style:{marginTop:"20px",padding:"20px",border:"1px solid #ddd",borderRadius:"12px",backgroundColor:"#fafafa",width:"100%",maxWidth:"800px",boxShadow:"0 4px 10px rgba(0,0,0,0.05)",textAlign:"left"},children:[(0,i.jsx)("h3",{style:{fontSize:"1.5em",color:"#2c3e50",marginBottom:"15px"},children:"六大指標分數 (Resume Score):"}),(0,i.jsx)("ul",{style:{listStyle:"none",padding:0,fontSize:"1em",lineHeight:"1.8",color:"#4a4a4a"},children:Object.entries(g).map(e=>{let[o,r]=e;return(0,i.jsxs)("li",{children:[(0,i.jsxs)("strong",{children:[o,"："]})," ",r," 分"]},o)})}),(0,i.jsx)("div",{style:{marginTop:"30px"},children:(0,i.jsx)(b.Vd,{data:{labels:Object.keys(g),datasets:[{label:"履歷分數",data:Object.values(g),backgroundColor:"rgba(54, 162, 235, 0.2)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:2,pointBackgroundColor:"rgba(54, 162, 235, 1)"}]},options:{scales:{r:{suggestedMin:0,suggestedMax:10,ticks:{stepSize:1},pointLabels:{font:{size:14}}}}}})})]})]})]})}function v(){var e;let[o,r]=(0,a.useState)("resume"),[l,d]=(0,a.useState)(null),[c,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!t)return void x(!1);let e=(0,s.hg)(t,e=>{d(e),x(!1)});return()=>e()},[]);let u=async()=>{if(!p||!t||!n)return void alert("Firebase 未正確配置。請聯繫管理員設定 Firebase 配置。");try{x(!0);let e=await (0,s.df)(t,n);console.log("登入成功:",e.user)}catch(e){console.error("登入失敗:",e),alert("登入失敗，請稍後再試")}finally{x(!1)}},f=async()=>{if(t)try{await (0,s.CI)(t),console.log("登出成功")}catch(e){console.error("登出失敗:",e)}};return(0,i.jsxs)("div",{style:{fontFamily:"Arial, sans-serif",display:"flex",backgroundColor:"#f5f5f5",minHeight:"100vh",color:"#333",position:"relative"},children:[(0,i.jsx)("div",{style:{position:"absolute",top:"20px",right:"20px",zIndex:100},children:l?(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"8px 16px",backgroundColor:"#ffffff",border:"1px solid #dadce0",borderRadius:"24px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[l.photoURL?(0,i.jsx)("img",{src:l.photoURL,alt:"User Avatar",style:{width:"32px",height:"32px",borderRadius:"50%"}}):(0,i.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"#4285F4",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"14px",fontWeight:"bold"},children:(null==(e=l.displayName)?void 0:e.charAt(0))||"U"}),(0,i.jsx)("span",{style:{fontSize:"14px",color:"#3c4043"},children:l.displayName||"用戶"}),(0,i.jsx)("button",{onClick:f,style:{padding:"4px 8px",backgroundColor:"transparent",border:"none",cursor:"pointer",fontSize:"12px",color:"#5f6368",borderRadius:"4px"},children:"登出"})]}):(0,i.jsxs)("button",{onClick:u,disabled:c,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",backgroundColor:"#ffffff",border:"1px solid #dadce0",borderRadius:"24px",cursor:c?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",color:"#3c4043",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.2s ease",opacity:c?.7:1},onMouseOver:e=>{c||(e.currentTarget.style.boxShadow="0 4px 8px rgba(0,0,0,0.15)")},onMouseOut:e=>{e.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},children:[(0,i.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[(0,i.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,i.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,i.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,i.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),c?"載入中...":"使用 Google 登入"]})}),(0,i.jsx)("div",{style:{width:"8cm",minHeight:"100vh",background:"linear-gradient(180deg, #4f46e5 0%, #7c3aed 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"40px 20px",color:"white",textAlign:"center",backgroundImage:'url("/insurance.png")',backgroundSize:"60% auto",backgroundRepeat:"no-repeat",backgroundPosition:"left 200px",backgroundBlendMode:"overlay",position:"relative"},onClick:()=>{window.open("https://www.104.com.tw/company/12sktyow?jobsource=google","_blank")},children:(0,i.jsx)("div",{style:{position:"absolute",top:"25%",left:"5%",width:"55%",height:"50%",cursor:"pointer",zIndex:10,backgroundColor:"transparent",borderRadius:"8px"},onClick:()=>{window.open("https://www.cathay-ins.com.tw/cathayins/personal/","_blank")}})}),(0,i.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"60px 40px",backgroundColor:"#ffffff",minHeight:"100vh"},children:[(0,i.jsx)("h1",{style:{fontSize:"2.5em",fontWeight:"300",color:"#2d3748",marginBottom:"50px",letterSpacing:"3px",textAlign:"center"},children:"履歷診療室\uD83E\uDE7A\uD83D\uDC8A"}),(0,i.jsxs)("div",{style:{display:"flex",marginBottom:"50px",backgroundColor:"#f8fafc",borderRadius:"50px",padding:"8px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",border:"1px solid #e2e8f0"},children:[(0,i.jsx)("button",{onClick:()=>r("resume"),style:{padding:"16px 32px",fontSize:"16px",fontWeight:"500",borderRadius:"50px",border:"none",cursor:"pointer",background:"resume"===o?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"transparent",color:"resume"===o?"#fff":"#64748b",transition:"all 0.3s ease",outline:"none",letterSpacing:"1px",minWidth:"180px"},children:"履歷分析"}),(0,i.jsx)("button",{onClick:()=>r("interview"),style:{padding:"16px 32px",fontSize:"16px",fontWeight:"500",borderRadius:"50px",border:"none",cursor:"pointer",background:"interview"===o?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"transparent",color:"interview"===o?"#fff":"#64748b",transition:"all 0.3s ease",outline:"none",letterSpacing:"1px",minWidth:"180px"},children:"模擬面試"})]}),(0,i.jsxs)("div",{style:{width:"100%",maxWidth:"900px",backgroundColor:"#ffffff",borderRadius:"20px",boxShadow:"0 8px 30px rgba(0,0,0,0.12)",padding:"0",border:"1px solid #f1f5f9",overflow:"hidden"},children:["resume"===o&&(0,i.jsx)(m,{}),"interview"===o&&(0,i.jsx)(g,{})]})]}),(0,i.jsx)("div",{style:{width:"8cm",minHeight:"100vh",background:"linear-gradient(180deg, #ef4444 0%, #dc2626 100%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:"40px 20px",color:"white",textAlign:"center",backgroundImage:'url("/insurance.png")',backgroundSize:"60% auto",backgroundRepeat:"no-repeat",backgroundPosition:"right 200px",backgroundBlendMode:"overlay",position:"relative"},children:(0,i.jsx)("div",{style:{position:"absolute",top:"25%",right:"5%",width:"55%",height:"50%",cursor:"pointer",zIndex:10,backgroundColor:"transparent",borderRadius:"8px"},onClick:()=>{window.open("https://www.cathay-ins.com.tw/cathayins/personal/","_blank")}})})]})}h.t1.register(h.pr,h.FN,h.No,h.dN,h.m_,h.s$)}},e=>{var o=o=>e(e.s=o);e.O(0,[598,699,894,346,83,358],()=>o(2770)),_N_E=e.O()}]);